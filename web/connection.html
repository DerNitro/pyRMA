{% extends "main.html" %}
{% from "menu.html" import show_menu %}
{% from "search.html" import show_search %}

{% block header %}
{{ show_menu(username, Admin=admin, Active='connection') }}
{{ show_search(search) }}
{{ super() }}
{% endblock %}
{% block content %}
<h2>Подключение по {{ content['connection_type']['name'] }} к <a href="/host/{{ content['host']['id'] }}">{{ content['host']['name'] }}</a></h2>
<table border="1"">
    <tr>
        <td>Пользователь</td>
        <td><a href="/administrate/user/{{ content['user']['uid'] }}">{{ content['user']['full_name'] }}</a></td>
    </tr>
    <tr>
        <td>IP пользователя</td>
        <td>{{ content['user']['ip'] }}</td>
    </tr>
    <tr>
        <td>Статус</td>
        {% if content['connection']['status'] == 1 %}<td>Подключен</td>{% endif %}
        {% if content['connection']['status'] == 2 %}<td>Отключен</td>{% endif %}
    </tr>
    <tr>
        <td>Дата Начала</td>
        <td>{{ content['connection']['date_start'] }}</td>
    </tr>
    <tr>
        <td>Дата Начала</td>
        <td>{{ content['connection']['date_end'] }}</td>
    </tr>
    <tr>
        <td>Завершение</td>
        {% if content['connection']['termination'] == 0 %}<td>Нормальное</td>{% endif %}
        {% if content['connection']['termination'] == 1 %}<td>Принудительное</td>{% endif %}
        {% if content['connection']['termination'] == 2 %}<td>Ошибка</td>{% endif %}
    </tr>
    {% if content['connection']['termination'] == 2 %}
    <tr>
        <td>Ошибка</td>
        <td>{{ content['connection']['error'] }}</td>
    </tr>
    {% endif %}
</table>
<hr>
<center><div id="tty"></div></center>
<script>
    AsciinemaPlayer.create('/ttyrec/{{ content['session']['ttyrec'] }}', document.getElementById('tty'));
</script>

{% endblock %}
